---
title: bucket_replications
hide_title: false
hide_table_of_contents: false
keywords:
  - bucket_replications
  - s3
  - aws    
  - stackql
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage AWS resources using SQL
custom_edit_url: null
image: https://storage.googleapis.com/stackql-web-assets/blog/stackql-blog-post-featured-image.png
---
  
    

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><code>bucket_replications</code></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><code>aws.s3.bucket_replications</code></td></tr>
</tbody></table>

## Fields
`SELECT` not supported for this resource, use `SHOW METHODS` to view available operations for the resource and then invoke a supported method using the `EXEC` command  
## Methods
| Name | Accessible by | Required Params | Description |
|:-----|:--------------|:----------------|:------------|
| `bucket_replications_Get` | `SELECT` | `replication` | &lt;p&gt;Returns the replication configuration of a bucket.&lt;/p&gt; &lt;note&gt; &lt;p&gt; It can take a while to propagate the put or delete a replication configuration to all Amazon S3 systems. Therefore, a get request soon after put or delete can return a wrong result. &lt;/p&gt; &lt;/note&gt; &lt;p&gt; For information about replication configuration, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/replication.html"&gt;Replication&lt;/a&gt; in the &lt;i&gt;Amazon S3 User Guide&lt;/i&gt;.&lt;/p&gt; &lt;p&gt;This action requires permissions for the &lt;code&gt;s3:GetReplicationConfiguration&lt;/code&gt; action. For more information about permissions, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/using-iam-policies.html"&gt;Using Bucket Policies and User Policies&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;If you include the &lt;code&gt;Filter&lt;/code&gt; element in a replication configuration, you must also include the &lt;code&gt;DeleteMarkerReplication&lt;/code&gt; and &lt;code&gt;Priority&lt;/code&gt; elements. The response also returns those elements.&lt;/p&gt; &lt;p&gt;For information about &lt;code&gt;GetBucketReplication&lt;/code&gt; errors, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html#ReplicationErrorCodeList"&gt;List of replication-related error codes&lt;/a&gt; &lt;/p&gt; &lt;p&gt;The following operations are related to &lt;code&gt;GetBucketReplication&lt;/code&gt;:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketReplication.html"&gt;PutBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteBucketReplication.html"&gt;DeleteBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; |
| `bucket_replications_Delete` | `DELETE` | `replication` | &lt;p&gt; Deletes the replication configuration from the bucket.&lt;/p&gt; &lt;p&gt;To use this operation, you must have permissions to perform the &lt;code&gt;s3:PutReplicationConfiguration&lt;/code&gt; action. The bucket owner has these permissions by default and can grant it to others. For more information about permissions, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-with-s3-actions.html#using-with-s3-actions-related-to-bucket-subresources"&gt;Permissions Related to Bucket Subresource Operations&lt;/a&gt; and &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html"&gt;Managing Access Permissions to Your Amazon S3 Resources&lt;/a&gt;. &lt;/p&gt; &lt;note&gt; &lt;p&gt;It can take a while for the deletion of a replication configuration to fully propagate.&lt;/p&gt; &lt;/note&gt; &lt;p&gt; For information about replication configuration, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/replication.html"&gt;Replication&lt;/a&gt; in the &lt;i&gt;Amazon S3 User Guide&lt;/i&gt;.&lt;/p&gt; &lt;p&gt;The following operations are related to &lt;code&gt;DeleteBucketReplication&lt;/code&gt;:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketReplication.html"&gt;PutBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketReplication.html"&gt;GetBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; |
| `bucket_replications_Put` | `EXEC` | `replication` | &lt;p&gt; Creates a replication configuration or replaces an existing one. For more information, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/replication.html"&gt;Replication&lt;/a&gt; in the &lt;i&gt;Amazon S3 User Guide&lt;/i&gt;. &lt;/p&gt; &lt;p&gt;Specify the replication configuration in the request body. In the replication configuration, you provide the name of the destination bucket or buckets where you want Amazon S3 to replicate objects, the IAM role that Amazon S3 can assume to replicate objects on your behalf, and other relevant information.&lt;/p&gt; &lt;p&gt;A replication configuration must include at least one rule, and can contain a maximum of 1,000. Each rule identifies a subset of objects to replicate by filtering the objects in the source bucket. To choose additional subsets of objects to replicate, add a rule for each subset.&lt;/p&gt; &lt;p&gt;To specify a subset of the objects in the source bucket to apply a replication rule to, add the Filter element as a child of the Rule element. You can filter objects based on an object key prefix, one or more object tags, or both. When you add the Filter element in the configuration, you must also add the following elements: &lt;code&gt;DeleteMarkerReplication&lt;/code&gt;, &lt;code&gt;Status&lt;/code&gt;, and &lt;code&gt;Priority&lt;/code&gt;.&lt;/p&gt; &lt;note&gt; &lt;p&gt;If you are using an earlier version of the replication configuration, Amazon S3 handles replication of delete markers differently. For more information, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/replication-add-config.html#replication-backward-compat-considerations"&gt;Backward Compatibility&lt;/a&gt;.&lt;/p&gt; &lt;/note&gt; &lt;p&gt;For information about enabling versioning on a bucket, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html"&gt;Using Versioning&lt;/a&gt;.&lt;/p&gt; &lt;p&gt; &lt;b&gt;Handling Replication of Encrypted Objects&lt;/b&gt; &lt;/p&gt; &lt;p&gt;By default, Amazon S3 doesn't replicate objects that are stored at rest using server-side encryption with KMS keys. To replicate Amazon Web Services KMS-encrypted objects, add the following: &lt;code&gt;SourceSelectionCriteria&lt;/code&gt;, &lt;code&gt;SseKmsEncryptedObjects&lt;/code&gt;, &lt;code&gt;Status&lt;/code&gt;, &lt;code&gt;EncryptionConfiguration&lt;/code&gt;, and &lt;code&gt;ReplicaKmsKeyID&lt;/code&gt;. For information about replication configuration, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/replication-config-for-kms-objects.html"&gt;Replicating Objects Created with SSE Using KMS keys&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;For information on &lt;code&gt;PutBucketReplication&lt;/code&gt; errors, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html#ReplicationErrorCodeList"&gt;List of replication-related error codes&lt;/a&gt; &lt;/p&gt; &lt;p&gt; &lt;b&gt;Permissions&lt;/b&gt; &lt;/p&gt; &lt;p&gt;To create a &lt;code&gt;PutBucketReplication&lt;/code&gt; request, you must have &lt;code&gt;s3:PutReplicationConfiguration&lt;/code&gt; permissions for the bucket. &lt;/p&gt; &lt;p&gt;By default, a resource owner, in this case the Amazon Web Services account that created the bucket, can perform this operation. The resource owner can also grant others permissions to perform the operation. For more information about permissions, see &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/using-with-s3-actions.html"&gt;Specifying Permissions in a Policy&lt;/a&gt; and &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html"&gt;Managing Access Permissions to Your Amazon S3 Resources&lt;/a&gt;.&lt;/p&gt; &lt;note&gt; &lt;p&gt;To perform this operation, the user or role performing the action must have the &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html"&gt;iam:PassRole&lt;/a&gt; permission.&lt;/p&gt; &lt;/note&gt; &lt;p&gt;The following operations are related to &lt;code&gt;PutBucketReplication&lt;/code&gt;:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketReplication.html"&gt;GetBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt; &lt;a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteBucketReplication.html"&gt;DeleteBucketReplication&lt;/a&gt; &lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; |
