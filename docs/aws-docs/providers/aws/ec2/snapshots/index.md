---
title: snapshots
hide_title: false
hide_table_of_contents: false
keywords:
  - snapshots
  - ec2
  - aws    
  - stackql
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage AWS resources using SQL
custom_edit_url: null
image: https://storage.googleapis.com/stackql-web-assets/blog/stackql-blog-post-featured-image.png
---
  
    

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><code>snapshots</code></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><code>aws.ec2.snapshots</code></td></tr>
</tbody></table>

## Fields
| Name | Datatype | Description |
|:-----|:---------|:------------|
| `description` | `string` | The description for the snapshot. |
| `status` | `string` | The snapshot state. |
| `statusMessage` | `string` | Encrypted Amazon EBS snapshots are copied asynchronously. If a snapshot copy operation fails (for example, if the proper Key Management Service (KMS) permissions are not obtained) this field displays error state details to help you diagnose why the error occurred. This parameter is only returned by &lt;a&gt;DescribeSnapshots&lt;/a&gt;. |
| `volumeId` | `string` | The ID of the volume that was used to create the snapshot. Snapshots created by the &lt;a&gt;CopySnapshot&lt;/a&gt; action have an arbitrary volume ID that should not be used for any purpose. |
| `dataEncryptionKeyId` | `string` | The data encryption key identifier for the snapshot. This value is a unique identifier that corresponds to the data encryption key that was used to encrypt the original volume or snapshot copy. Because data encryption keys are inherited by volumes created from snapshots, and vice versa, if snapshots share the same data encryption key identifier, then they belong to the same volume/snapshot lineage. This parameter is only returned by &lt;a&gt;DescribeSnapshots&lt;/a&gt;. |
| `outpostArn` | `string` | The ARN of the Outpost on which the snapshot is stored. For more information, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/snapshots-outposts.html"&gt;Amazon EBS local snapshots on Outposts&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;. |
| `ownerId` | `string` | The ID of the Amazon Web Services account that owns the EBS snapshot. |
| `restoreExpiryTime` | `string` | Only for archived snapshots that are temporarily restored. Indicates the date and time when a temporarily restored snapshot will be automatically re-archived. |
| `encrypted` | `boolean` | Indicates whether the snapshot is encrypted. |
| `startTime` | `string` | The time stamp when the snapshot was initiated. |
| `progress` | `string` | The progress of the snapshot, as a percentage. |
| `volumeSize` | `integer` | The size of the volume, in GiB. |
| `storageTier` | `string` | The storage tier in which the snapshot is stored. &lt;code&gt;standard&lt;/code&gt; indicates that the snapshot is stored in the standard snapshot storage tier and that it is ready for use. &lt;code&gt;archive&lt;/code&gt; indicates that the snapshot is currently archived and that it must be restored before it can be used. |
| `kmsKeyId` | `string` | The Amazon Resource Name (ARN) of the Key Management Service (KMS) KMS key that was used to protect the volume encryption key for the parent volume. |
| `tagSet` | `array` | Any tags assigned to the snapshot. |
| `snapshotId` | `string` | The ID of the snapshot. Each snapshot receives a unique identifier when it is created. |
| `ownerAlias` | `string` | The Amazon Web Services owner alias, from an Amazon-maintained list (&lt;code&gt;amazon&lt;/code&gt;). This is not the user-configured Amazon Web Services account alias set using the IAM console. |
## Methods
| Name | Accessible by | Required Params | Description |
|:-----|:--------------|:----------------|:------------|
| `snapshots_Describe` | `SELECT` |  | &lt;p&gt;Describes the specified EBS snapshots available to you or all of the EBS snapshots available to you.&lt;/p&gt; &lt;p&gt;The snapshots available to you include public snapshots, private snapshots that you own, and private snapshots owned by other Amazon Web Services accounts for which you have explicit create volume permissions.&lt;/p&gt; &lt;p&gt;The create volume permissions fall into the following categories:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt; &lt;i&gt;public&lt;/i&gt;: The owner of the snapshot granted create volume permissions for the snapshot to the &lt;code&gt;all&lt;/code&gt; group. All Amazon Web Services accounts have create volume permissions for these snapshots.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt; &lt;i&gt;explicit&lt;/i&gt;: The owner of the snapshot granted create volume permissions to a specific Amazon Web Services account.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt; &lt;i&gt;implicit&lt;/i&gt;: An Amazon Web Services account has implicit create volume permissions for all snapshots it owns.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;The list of snapshots returned can be filtered by specifying snapshot IDs, snapshot owners, or Amazon Web Services accounts with create volume permissions. If no options are specified, Amazon EC2 returns all snapshots for which you have create volume permissions.&lt;/p&gt; &lt;p&gt;If you specify one or more snapshot IDs, only snapshots that have the specified IDs are returned. If you specify an invalid snapshot ID, an error is returned. If you specify a snapshot ID for which you do not have access, it is not included in the returned results.&lt;/p&gt; &lt;p&gt;If you specify one or more snapshot owners using the &lt;code&gt;OwnerIds&lt;/code&gt; option, only snapshots from the specified owners and for which you have access are returned. The results can include the Amazon Web Services account IDs of the specified owners, &lt;code&gt;amazon&lt;/code&gt; for snapshots owned by Amazon, or &lt;code&gt;self&lt;/code&gt; for snapshots that you own.&lt;/p&gt; &lt;p&gt;If you specify a list of restorable users, only snapshots with create snapshot permissions for those users are returned. You can specify Amazon Web Services account IDs (if you own the snapshots), &lt;code&gt;self&lt;/code&gt; for snapshots for which you own or have explicit permissions, or &lt;code&gt;all&lt;/code&gt; for public snapshots.&lt;/p&gt; &lt;p&gt;If you are describing a long list of snapshots, we recommend that you paginate the output to make the list more manageable. The &lt;code&gt;MaxResults&lt;/code&gt; parameter sets the maximum number of results returned in a single page. If the list of results exceeds your &lt;code&gt;MaxResults&lt;/code&gt; value, then that number of results is returned along with a &lt;code&gt;NextToken&lt;/code&gt; value that can be passed to a subsequent &lt;code&gt;DescribeSnapshots&lt;/code&gt; request to retrieve the remaining results.&lt;/p&gt; &lt;p&gt;To get the state of fast snapshot restores for a snapshot, use &lt;a&gt;DescribeFastSnapshotRestores&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;For more information about EBS snapshots, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSSnapshots.html"&gt;Amazon EBS snapshots&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; |
| `snapshot_Create` | `INSERT` | `VolumeId` | &lt;p&gt;Creates a snapshot of an EBS volume and stores it in Amazon S3. You can use snapshots for backups, to make copies of EBS volumes, and to save data before shutting down an instance.&lt;/p&gt; &lt;p&gt;You can create snapshots of volumes in a Region and volumes on an Outpost. If you create a snapshot of a volume in a Region, the snapshot must be stored in the same Region as the volume. If you create a snapshot of a volume on an Outpost, the snapshot can be stored on the same Outpost as the volume, or in the Region for that Outpost.&lt;/p&gt; &lt;p&gt;When a snapshot is created, any Amazon Web Services Marketplace product codes that are associated with the source volume are propagated to the snapshot.&lt;/p&gt; &lt;p&gt;You can take a snapshot of an attached volume that is in use. However, snapshots only capture data that has been written to your Amazon EBS volume at the time the snapshot command is issued; this might exclude any data that has been cached by any applications or the operating system. If you can pause any file systems on the volume long enough to take a snapshot, your snapshot should be complete. However, if you cannot pause all file writes to the volume, you should unmount the volume from within the instance, issue the snapshot command, and then remount the volume to ensure a consistent and complete snapshot. You may remount and use your volume while the snapshot status is &lt;code&gt;pending&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;To create a snapshot for Amazon EBS volumes that serve as root devices, you should stop the instance before taking the snapshot.&lt;/p&gt; &lt;p&gt;Snapshots that are taken from encrypted volumes are automatically encrypted. Volumes that are created from encrypted snapshots are also automatically encrypted. Your encrypted volumes and any associated snapshots always remain protected.&lt;/p&gt; &lt;p&gt;You can tag your snapshots during creation. For more information, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html"&gt;Tag your Amazon EC2 resources&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; &lt;p&gt;For more information, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html"&gt;Amazon Elastic Block Store&lt;/a&gt; and &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html"&gt;Amazon EBS encryption&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; |
| `snapshots_Create` | `INSERT` | `InstanceSpecification` | &lt;p&gt;Creates crash-consistent snapshots of multiple EBS volumes and stores the data in S3. Volumes are chosen by specifying an instance. Any attached volumes will produce one snapshot each that is crash-consistent across the instance. Boot volumes can be excluded by changing the parameters. &lt;/p&gt; &lt;p&gt;You can create multi-volume snapshots of instances in a Region and instances on an Outpost. If you create snapshots from an instance in a Region, the snapshots must be stored in the same Region as the instance. If you create snapshots from an instance on an Outpost, the snapshots can be stored on the same Outpost as the instance, or in the Region for that Outpost.&lt;/p&gt; |
| `snapshot_Delete` | `DELETE` | `SnapshotId` | &lt;p&gt;Deletes the specified snapshot.&lt;/p&gt; &lt;p&gt;When you make periodic snapshots of a volume, the snapshots are incremental, and only the blocks on the device that have changed since your last snapshot are saved in the new snapshot. When you delete a snapshot, only the data not needed for any other snapshot is removed. So regardless of which prior snapshots have been deleted, all active snapshots will have access to all the information needed to restore the volume.&lt;/p&gt; &lt;p&gt;You cannot delete a snapshot of the root device of an EBS volume used by a registered AMI. You must first de-register the AMI before you can delete the snapshot.&lt;/p&gt; &lt;p&gt;For more information, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-deleting-snapshot.html"&gt;Delete an Amazon EBS snapshot&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; |
| `snapshot_Copy` | `EXEC` | `SourceRegion, SourceSnapshotId` | &lt;p&gt;Copies a point-in-time snapshot of an EBS volume and stores it in Amazon S3. You can copy a snapshot within the same Region, from one Region to another, or from a Region to an Outpost. You can't copy a snapshot from an Outpost to a Region, from one Outpost to another, or within the same Outpost.&lt;/p&gt; &lt;p&gt;You can use the snapshot to create EBS volumes or Amazon Machine Images (AMIs).&lt;/p&gt; &lt;p&gt;When copying snapshots to a Region, copies of encrypted EBS snapshots remain encrypted. Copies of unencrypted snapshots remain unencrypted, unless you enable encryption for the snapshot copy operation. By default, encrypted snapshot copies use the default Key Management Service (KMS) KMS key; however, you can specify a different KMS key. To copy an encrypted snapshot that has been shared from another account, you must have permissions for the KMS key used to encrypt the snapshot.&lt;/p&gt; &lt;p&gt;Snapshots copied to an Outpost are encrypted by default using the default encryption key for the Region, or a different key that you specify in the request using &lt;b&gt;KmsKeyId&lt;/b&gt;. Outposts do not support unencrypted snapshots. For more information, &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/snapshots-outposts.html#ami"&gt; Amazon EBS local snapshots on Outposts&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; &lt;p&gt;Snapshots created by copying another snapshot have an arbitrary volume ID that should not be used for any purpose.&lt;/p&gt; &lt;p&gt;For more information, see &lt;a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-copy-snapshot.html"&gt;Copy an Amazon EBS snapshot&lt;/a&gt; in the &lt;i&gt;Amazon Elastic Compute Cloud User Guide&lt;/i&gt;.&lt;/p&gt; |
| `snapshot_Import` | `EXEC` |  | &lt;p&gt;Imports a disk into an EBS snapshot.&lt;/p&gt; &lt;p&gt;For more information, see &lt;a href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-import-snapshot.html"&gt;Importing a disk as a snapshot using VM Import/Export&lt;/a&gt; in the &lt;i&gt;VM Import/Export User Guide&lt;/i&gt;.&lt;/p&gt; |
