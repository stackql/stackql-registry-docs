---
title: instances
hide_title: false
hide_table_of_contents: false
keywords:
  - instances
  - datafusion
  - google
  - stackql
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage Google Cloud Platform (GCP) infrastructure and resources using SQL
custom_edit_url: null
image: /img/providers/google/stackql-google-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Creates, updates, deletes, gets or lists a <code>instances</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><code>instances</code></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="google.datafusion.instances" /></td></tr>
</tbody></table>

## Fields
| Name | Datatype | Description |
|:-----|:---------|:------------|
| <CopyableCode code="name" /> | `string` | Output only. The name of this instance is in the form of projects/{project}/locations/{location}/instances/{instance}. |
| <CopyableCode code="description" /> | `string` | A description of this instance. |
| <CopyableCode code="accelerators" /> | `array` | Output only. List of accelerators enabled for this CDF instance. |
| <CopyableCode code="apiEndpoint" /> | `string` | Output only. Endpoint on which the REST APIs is accessible. |
| <CopyableCode code="availableVersion" /> | `array` | Output only. Available versions that the instance can be upgraded to using UpdateInstanceRequest. |
| <CopyableCode code="createTime" /> | `string` | Output only. The time the instance was created. |
| <CopyableCode code="cryptoKeyConfig" /> | `object` | The crypto key configuration. This field is used by the Customer-managed encryption keys (CMEK) feature. |
| <CopyableCode code="dataplexDataLineageIntegrationEnabled" /> | `boolean` | Optional. Option to enable the Dataplex Lineage Integration feature. |
| <CopyableCode code="dataprocServiceAccount" /> | `string` | User-managed service account to set on Dataproc when Cloud Data Fusion creates Dataproc to run data processing pipelines. This allows users to have fine-grained access control on Dataproc's accesses to cloud resources. |
| <CopyableCode code="disabledReason" /> | `array` | Output only. If the instance state is DISABLED, the reason for disabling the instance. |
| <CopyableCode code="displayName" /> | `string` | Display name for an instance. |
| <CopyableCode code="enableRbac" /> | `boolean` | Option to enable granular role-based access control. |
| <CopyableCode code="enableStackdriverLogging" /> | `boolean` | Option to enable Stackdriver Logging. |
| <CopyableCode code="enableStackdriverMonitoring" /> | `boolean` | Option to enable Stackdriver Monitoring. |
| <CopyableCode code="enableZoneSeparation" /> | `boolean` | Option to enable granular zone separation. |
| <CopyableCode code="eventPublishConfig" /> | `object` | Confirguration of PubSubEventWriter. |
| <CopyableCode code="gcsBucket" /> | `string` | Output only. Cloud Storage bucket generated by Data Fusion in the customer project. |
| <CopyableCode code="labels" /> | `object` | The resource labels for instance to use to annotate any related underlying resources such as Compute Engine VMs. The character '=' is not allowed to be used within the labels. |
| <CopyableCode code="maintenancePolicy" /> | `object` | Maintenance policy of the instance. |
| <CopyableCode code="networkConfig" /> | `object` | Network configuration for a Data Fusion instance. These configurations are used for peering with the customer network. Configurations are optional when a public Data Fusion instance is to be created. However, providing these configurations allows several benefits, such as reduced network latency while accessing the customer resources from managed Data Fusion instance nodes, as well as access to the customer on-prem resources. |
| <CopyableCode code="options" /> | `object` | Map of additional options used to configure the behavior of Data Fusion instance. |
| <CopyableCode code="p4ServiceAccount" /> | `string` | Output only. Service agent for the customer project. |
| <CopyableCode code="patchRevision" /> | `string` | Optional. Current patch revision of the Data Fusion. |
| <CopyableCode code="privateInstance" /> | `boolean` | Specifies whether the Data Fusion instance should be private. If set to true, all Data Fusion nodes will have private IP addresses and will not be able to access the public internet. |
| <CopyableCode code="satisfiesPzs" /> | `boolean` | Output only. Reserved for future use. |
| <CopyableCode code="serviceAccount" /> | `string` | Output only. Deprecated. Use tenant_project_id instead to extract the tenant project ID. |
| <CopyableCode code="serviceEndpoint" /> | `string` | Output only. Endpoint on which the Data Fusion UI is accessible. |
| <CopyableCode code="state" /> | `string` | Output only. The current state of this Data Fusion instance. |
| <CopyableCode code="stateMessage" /> | `string` | Output only. Additional information about the current state of this Data Fusion instance if available. |
| <CopyableCode code="tenantProjectId" /> | `string` | Output only. The name of the tenant project. |
| <CopyableCode code="type" /> | `string` | Required. Instance type. |
| <CopyableCode code="updateTime" /> | `string` | Output only. The time the instance was last updated. |
| <CopyableCode code="version" /> | `string` | Current version of the Data Fusion. Only specifiable in Update. |
| <CopyableCode code="workforceIdentityServiceEndpoint" /> | `string` | Output only. Endpoint on which the Data Fusion UI is accessible to third-party users |
| <CopyableCode code="zone" /> | `string` | Name of the zone in which the Data Fusion instance will be created. Only DEVELOPER instances use this field. |

## Methods
| Name | Accessible by | Required Params | Description |
|:-----|:--------------|:----------------|:------------|
| <CopyableCode code="get" /> | `SELECT` | <CopyableCode code="instancesId, locationsId, projectsId" /> | Gets details of a single Data Fusion instance. |
| <CopyableCode code="list" /> | `SELECT` | <CopyableCode code="locationsId, projectsId" /> | Lists Data Fusion instances in the specified project and location. |
| <CopyableCode code="create" /> | `INSERT` | <CopyableCode code="locationsId, projectsId" /> | Creates a new Data Fusion instance in the specified project and location. |
| <CopyableCode code="delete" /> | `DELETE` | <CopyableCode code="instancesId, locationsId, projectsId" /> | Deletes a single Date Fusion instance. |
| <CopyableCode code="patch" /> | `UPDATE` | <CopyableCode code="instancesId, locationsId, projectsId" /> | Updates a single Data Fusion instance. |
| <CopyableCode code="restart" /> | `EXEC` | <CopyableCode code="instancesId, locationsId, projectsId" /> | Restart a single Data Fusion instance. At the end of an operation instance is fully restarted. |

## `SELECT` examples

Lists Data Fusion instances in the specified project and location.

```sql
SELECT
name,
description,
accelerators,
apiEndpoint,
availableVersion,
createTime,
cryptoKeyConfig,
dataplexDataLineageIntegrationEnabled,
dataprocServiceAccount,
disabledReason,
displayName,
enableRbac,
enableStackdriverLogging,
enableStackdriverMonitoring,
enableZoneSeparation,
eventPublishConfig,
gcsBucket,
labels,
maintenancePolicy,
networkConfig,
options,
p4ServiceAccount,
patchRevision,
privateInstance,
satisfiesPzs,
serviceAccount,
serviceEndpoint,
state,
stateMessage,
tenantProjectId,
type,
updateTime,
version,
workforceIdentityServiceEndpoint,
zone
FROM google.datafusion.instances
WHERE locationsId = '{{ locationsId }}'
AND projectsId = '{{ projectsId }}'; 
```

## `INSERT` example

Use the following StackQL query and manifest file to create a new <code>instances</code> resource.

<Tabs
    defaultValue="all"
    values={[
        { label: 'All Properties', value: 'all', },
        { label: 'Manifest', value: 'manifest', },
    ]
}>
<TabItem value="all">

```sql
/*+ create */
INSERT INTO google.datafusion.instances (
locationsId,
projectsId,
name,
description,
type,
enableStackdriverLogging,
enableStackdriverMonitoring,
privateInstance,
networkConfig,
labels,
options,
createTime,
updateTime,
state,
stateMessage,
serviceEndpoint,
zone,
version,
serviceAccount,
displayName,
availableVersion,
apiEndpoint,
gcsBucket,
accelerators,
p4ServiceAccount,
tenantProjectId,
dataprocServiceAccount,
enableRbac,
cryptoKeyConfig,
disabledReason,
eventPublishConfig,
enableZoneSeparation,
satisfiesPzs,
workforceIdentityServiceEndpoint,
patchRevision,
dataplexDataLineageIntegrationEnabled,
maintenancePolicy
)
SELECT 
'{{ locationsId }}',
'{{ projectsId }}',
'{{ name }}',
'{{ description }}',
'{{ type }}',
true|false,
true|false,
true|false,
'{{ networkConfig }}',
'{{ labels }}',
'{{ options }}',
'{{ createTime }}',
'{{ updateTime }}',
'{{ state }}',
'{{ stateMessage }}',
'{{ serviceEndpoint }}',
'{{ zone }}',
'{{ version }}',
'{{ serviceAccount }}',
'{{ displayName }}',
'{{ availableVersion }}',
'{{ apiEndpoint }}',
'{{ gcsBucket }}',
'{{ accelerators }}',
'{{ p4ServiceAccount }}',
'{{ tenantProjectId }}',
'{{ dataprocServiceAccount }}',
true|false,
'{{ cryptoKeyConfig }}',
'{{ disabledReason }}',
'{{ eventPublishConfig }}',
true|false,
true|false,
'{{ workforceIdentityServiceEndpoint }}',
'{{ patchRevision }}',
true|false,
'{{ maintenancePolicy }}'
;
```
</TabItem>
<TabItem value="manifest">

```yaml
- name: your_resource_model_name
  props:
    - name: name
      value: '{{ name }}'
    - name: description
      value: '{{ description }}'
    - name: type
      value: '{{ type }}'
    - name: enableStackdriverLogging
      value: '{{ enableStackdriverLogging }}'
    - name: enableStackdriverMonitoring
      value: '{{ enableStackdriverMonitoring }}'
    - name: privateInstance
      value: '{{ privateInstance }}'
    - name: networkConfig
      value: '{{ networkConfig }}'
    - name: labels
      value: '{{ labels }}'
    - name: options
      value: '{{ options }}'
    - name: createTime
      value: '{{ createTime }}'
    - name: updateTime
      value: '{{ updateTime }}'
    - name: state
      value: '{{ state }}'
    - name: stateMessage
      value: '{{ stateMessage }}'
    - name: serviceEndpoint
      value: '{{ serviceEndpoint }}'
    - name: zone
      value: '{{ zone }}'
    - name: version
      value: '{{ version }}'
    - name: serviceAccount
      value: '{{ serviceAccount }}'
    - name: displayName
      value: '{{ displayName }}'
    - name: availableVersion
      value: '{{ availableVersion }}'
    - name: apiEndpoint
      value: '{{ apiEndpoint }}'
    - name: gcsBucket
      value: '{{ gcsBucket }}'
    - name: accelerators
      value: '{{ accelerators }}'
    - name: p4ServiceAccount
      value: '{{ p4ServiceAccount }}'
    - name: tenantProjectId
      value: '{{ tenantProjectId }}'
    - name: dataprocServiceAccount
      value: '{{ dataprocServiceAccount }}'
    - name: enableRbac
      value: '{{ enableRbac }}'
    - name: cryptoKeyConfig
      value: '{{ cryptoKeyConfig }}'
    - name: disabledReason
      value: '{{ disabledReason }}'
    - name: eventPublishConfig
      value: '{{ eventPublishConfig }}'
    - name: enableZoneSeparation
      value: '{{ enableZoneSeparation }}'
    - name: satisfiesPzs
      value: '{{ satisfiesPzs }}'
    - name: workforceIdentityServiceEndpoint
      value: '{{ workforceIdentityServiceEndpoint }}'
    - name: patchRevision
      value: '{{ patchRevision }}'
    - name: dataplexDataLineageIntegrationEnabled
      value: '{{ dataplexDataLineageIntegrationEnabled }}'
    - name: maintenancePolicy
      value: '{{ maintenancePolicy }}'

```
</TabItem>
</Tabs>

## `UPDATE` example

Updates a <code>instances</code> resource.

```sql
/*+ update */
UPDATE google.datafusion.instances
SET 
name = '{{ name }}',
description = '{{ description }}',
type = '{{ type }}',
enableStackdriverLogging = true|false,
enableStackdriverMonitoring = true|false,
privateInstance = true|false,
networkConfig = '{{ networkConfig }}',
labels = '{{ labels }}',
options = '{{ options }}',
createTime = '{{ createTime }}',
updateTime = '{{ updateTime }}',
state = '{{ state }}',
stateMessage = '{{ stateMessage }}',
serviceEndpoint = '{{ serviceEndpoint }}',
zone = '{{ zone }}',
version = '{{ version }}',
serviceAccount = '{{ serviceAccount }}',
displayName = '{{ displayName }}',
availableVersion = '{{ availableVersion }}',
apiEndpoint = '{{ apiEndpoint }}',
gcsBucket = '{{ gcsBucket }}',
accelerators = '{{ accelerators }}',
p4ServiceAccount = '{{ p4ServiceAccount }}',
tenantProjectId = '{{ tenantProjectId }}',
dataprocServiceAccount = '{{ dataprocServiceAccount }}',
enableRbac = true|false,
cryptoKeyConfig = '{{ cryptoKeyConfig }}',
disabledReason = '{{ disabledReason }}',
eventPublishConfig = '{{ eventPublishConfig }}',
enableZoneSeparation = true|false,
satisfiesPzs = true|false,
workforceIdentityServiceEndpoint = '{{ workforceIdentityServiceEndpoint }}',
patchRevision = '{{ patchRevision }}',
dataplexDataLineageIntegrationEnabled = true|false,
maintenancePolicy = '{{ maintenancePolicy }}'
WHERE 
instancesId = '{{ instancesId }}'
AND locationsId = '{{ locationsId }}'
AND projectsId = '{{ projectsId }}';
```

## `DELETE` example

Deletes the specified <code>instances</code> resource.

```sql
/*+ delete */
DELETE FROM google.datafusion.instances
WHERE instancesId = '{{ instancesId }}'
AND locationsId = '{{ locationsId }}'
AND projectsId = '{{ projectsId }}';
```
